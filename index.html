<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Fchat</title>
<body>
  <div id="chat-header" class="chat-header">
  </div>
  <style>
    body { font-family: sans-serif; margin: 20px; }

    body.theme-light {
      --bg: #f0f2f5;
      --text: #1b1f26;
      --panel: #ffffff;
      --panel-border: #cccccc;
      --chat-bg: #ffffff;
      --chat-border: #cccccc;
      --bubble-incoming: #808080;
      --bubble-outgoing: #808080;
      --bubble-text: #1b1f26;
      --nickname: #000000; 
    }

    body.theme-dark {
      --bg: #1e1e1e;
      --text: #e6e6e6;
      --panel: #2a2a2a;
      --panel-border: #444444;
      --chat-bg: #2a2a2a;
      --chat-border: #444444;
      --bubble-incoming: #808080;
      --bubble-outgoing: #808080;
      --bubble-text: #ffffff;
      --nickname: #000000;
    }

    body.theme-lumia {
      --bg: #FAF9F6;
      --text: #333333;
      --panel: #F5EEDC;
      --panel-border: #DDDDDD;
      --chat-bg: #FFFFFF;
      --chat-border: #DDDDDD;
      --bubble-incoming: #FFF9C4;
      --bubble-outgoing: #FFF176; 
      --bubble-text: #333333;
      --nickname: #B8860B;
    }

    body.theme-Keket {
      --bg: #000000;
      --text: #FFFFFF;
      --panel: #000000;
      --panel-border: #8A2BE2;
      --chat-bg: #000000;
      --chat-border: #8A2BE2;
      --bubble-incoming: #7FFFD4;
      --bubble-outgoing: #4B0082;
      --bubble-text: #FFFFFF;
      --nickname: #7FFFD4; 
    }

    body.theme-cosmos {
      --bg: #0b0c10;
      --text: #c5c6c7;
      --panel: #1f2833;
      --panel-border: #45a29e;
      --chat-bg: #1f2833;
      --chat-border: #45a29e;
      --bubble-incoming: #0d3b66;
      --bubble-outgoing: #45a29e;
      --bubble-text: #ffffff;
      --nickname: #66fcf1;
    }

    body { background: var(--bg); color: var(--text); transition: background 200ms ease, color 200ms ease; }

    /* –ß–∞—Ç —Å –æ—Ç—Å—Ç—É–ø–æ–º –¥–ª—è –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ */
    #chat {
      border:1px solid var(--chat-border);
      padding:10px;
      height:300px;
      overflow:auto;
     margin:0 500px 10px 0;
      background:var(--chat-bg);
      border-radius:8px;
   
    }

    .msg { display:flex; align-items:flex-start; margin:8px 0; }
    .avatar { width:40px; height:40px; border-radius:50%; margin-right:8px; object-fit:cover; border:1px solid #aaa; }

    .bubble { position:relative; padding:8px 12px; border-radius:12px; max-width:70%; word-wrap:break-word; }
    .bubble.incoming { background: var(--bubble-incoming); color: var(--bubble-text); }
    .bubble.outgoing { background: var(--bubble-outgoing); color: var(--bubble-text); }

    .nick { font-weight:bold; margin-right:6px; color: var(--nickname); }
    .time { display:block; font-size:11px; color:#555; text-align:right; margin-top:4px; }
    .user-id {
      color: #808080;
      font-size: 0.85em;
      margin-left: 6px;
      text-shadow: 1px 1px 2px #000000;
    }

    .deleteBtn { position:absolute; top:-10px; right:-10px; background:#e63946; border:none; border-radius:50%; width:22px; height:22px; color:#fff; cursor:pointer; font-size:14px; line-height:22px; text-align:center; display:none; }
    .bubble:hover .deleteBtn { display:block; }

    .chatImage { max-width:200px; border-radius:8px; margin-top:5px; }

    input, button { padding:6px; border:1px solid #ccc; border-radius:6px; margin:2px; cursor:pointer; }
    #sendBtn { background:#666; color:#fff; }
    #sendBtn:hover { background:#444; }

    .color-btn { width:140px; height:30px; color:#fff; border:none; border-radius:6px; cursor:pointer; }
    #avatarPreview { width:40px; height:40px; border:1px solid #aaa; border-radius:50%; object-fit:cover; margin-left:10px; vertical-align:middle; display:none; }

#settingsBtn { position: fixed; right: 12px; top: 12px; background: var(--panel); border: 1px solid var(--panel-border); border-radius: 8px; padding: 6px 8px; cursor: pointer; z-index: 1000; }
    #settingsPanel { position: fixed; right: 12px; top: 52px; width: 240px; background: var(--panel); border: 1px solid var(--panel-border); border-radius: 12px; padding: 10px 12px; box-shadow: 0 10px 24px rgba(0,0,0,0.25); display: none; z-index: 1001; }
    #settingsPanel .row { margin:6px 0; }
    #settingsPanel input[type="radio"] { accent-color: #3b82f6; }

    #emojiBtn {
      font-size: 18px;
      padding: 4px 8px;
      margin-left: 4px;
      cursor: pointer;
    }

    #emojiPanel button {
      font-size: 20px;
      padding: 4px;
      margin: 2px;
      border: none;
      background: transparent;
      cursor: pointer;
    }

    #emojiPanel button:hover {
      transform: scale(1.2);
    }

    /* –¶–≤–µ—Ç –∫–Ω–æ–ø–æ–∫ —Å —ç–º–æ–¥–∑–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Ç–µ–º–∞—Ö */
    body.theme-light #emojiPanel button,
    body.theme-lumia #emojiPanel button {
      color: #000000;
    }

    body.theme-dark #emojiPanel button,
    body.theme-Keket #emojiPanel button,
    body.theme-cosmos #emojiPanel button {
      color: #ffffff;
    }

 /* –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ - –õ–ï–í–ï–ï –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
    #right-sidebar {
      position: fixed;
      right: 80px; /* –û—Å—Ç–∞–≤–ª—è–µ–º –º–µ—Å—Ç–æ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
      top: 110px;
      width: 280px; /* –ß—É—Ç—å —É–∂–µ */
      background: var(--panel);
      border: 1px solid var(--panel-border);
      border-radius: 12px;
      padding: 15px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      max-height: calc(100vh - 40px);
      overflow-y: auto;
      z-index: 1000; /* –ù–∏–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ */
    }

    .online-user {
      transition: all 0.2s ease;
    }


    .online-user:hover {
      transform: translateX(-3px);
      background: var(--bg) !important;
    }

    #right-sidebar::-webkit-scrollbar {
      width: 6px;
    }

    #right-sidebar::-webkit-scrollbar-track {
      background: transparent;
    }

    #right-sidebar::-webkit-scrollbar-thumb {
      background: var(--panel-border);
      border-radius: 3px;
    }

    #right-sidebar::-webkit-scrollbar-thumb:hover {
      background: var(--text);
    }

   .status-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      box-shadow: 0 0 5px currentColor;
    }

    .status-green { background: #4CAF50; color: #4CAF50; }
    .status-orange { background: #FF9800; color: #FF9800; }
    .status-red { background: #F44336; color: #F44336; }
 
    /* –î–ª—è —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
    @media (max-width: 900px) {
      #chat {
        width: 100%;
        margin-right: 0;
      }
      
      #right-sidebar {
        position: relative;
        right: auto;
        top: auto;
        width: 100%;
        margin-top: 20px;
        max-height: 200px;
      }
      
      #settingsBtn {
        right: 10px;
        top: 10px;
      }
      
      #settingsPanel {
        right: 10px;
        top: 50px;
      }
    }
  </style>
</head>
<body class="theme-light">
  <h2>Fchat</h2>

  <button id="settingsBtn" aria-label="–û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏" title="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">‚öôÔ∏è</button>
  <div id="settingsPanel" role="dialog" aria-modal="true" aria-label="–ù–∞—Å—Ç—Ä–æ–π–∫–∏">
    <div class="row"><strong>–¢–µ–º–∞:</strong></div>
    <div class="row"><label><input type="radio" name="theme" value="light"> –°–≤–µ—Ç–ª–∞—è</label></div>
    <div class="row"><label><input type="radio" name="theme" value="dark"> –¢—ë–º–Ω–∞—è</label></div>
    <div class="row"><label><input type="radio" name="theme" value="lumia"> –õ—é–º–∏—è</label></div>
    <div class="row"><label><input type="radio" name="theme" value="Keket"> –ö–µ–∫–µ—Ç</label></div>
    <div class="row"><label><input type="radio" name="theme" value="cosmos"> –¢—ë–º–Ω–∞—è –±–∏—Ä—é–∑–∞</label></div>
  </div>

  <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –æ–Ω–ª–∞–π–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ -->
  <div id="right-sidebar">
    <h3 style="margin-top: 0; color: var(--text);">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ–Ω–ª–∞–π–Ω</h3>
    
    <div style="margin-bottom: 15px;">
      <p style="margin: 5px 0;">
        <strong>–°–µ–π—á–∞—Å –≤ —Å–µ—Ç–∏:</strong> 
        <span id="onlineCount" style="color: #4CAF50; font-weight: bold;">0</span>
      </p>
      <p style="margin: 5px 0; font-size: 13px; color: #888;">
        (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫)
      </p>
    </div>
    
    <div id="onlineUsersList" style="margin-top: 15px;">
      <p id="noUsersOnline" style="color: #999; font-style: italic; text-align: center;">
        –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞...
      </p>
    </div>
  </div>

  <div id="chat"></div>

  <div>
    <input id="nick" placeholder="–í–∞—à –Ω–∏–∫">
    <input id="nickColorInput" type="color" style="display:none;">
    <input id="bubbleColorInput" type="color" style="display:none;">
    <button id="nickColorBtn" class="color-btn">–¶–≤–µ—Ç –Ω–∏–∫–∞</button>
    <button id="bubbleColorBtn" class="color-btn">–¶–≤–µ—Ç –æ–±–ª–∞—á–∫–∞</button>
    <input id="avatarInput" type="file" accept="image/*" style="display:none;">
    <button id="avatarBtn">–í—ã–±—Ä–∞—Ç—å –∞–≤–∞—Ç–∞—Ä–∫—É</button>
    <img id="avatarPreview" src="" alt="–ü—Ä–µ–≤—å—é">
  </div>
  <div>
    <input id="text" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ" style="width:300px;">
    <button id="emojiBtn">=)</button>
    <input id="fileInput" type="file" accept="image/*">
    <button id="sendBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
  </div>

  <div id="emojiPanel" style="display:none; margin-top:6px;">
    <button>=)</button>
    <button>=(</button>
    <button>=3</button>
    <button>=0</button>
    <button>(‚âß‚ñΩ‚â¶)</button>
     <button>(‚äô_‚òâ)</button>
<button>(ÔºõÔºøÔºõ)</button>
<button>¬Ø\_(„ÉÑ)_/¬Ø</button>
<button>(‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª</button>
<button>-_-</button>
<button>–æ_–û</button>
<button>(Õ°¬∞ Õú ñ Õ°¬∞)</button>
  </div>
  <details>
    <summary>–û Fchat</summary>
    <strong>Fchat ‚Äî —á–∞—Ç —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º.</strong>  
    –≠—Ç–æ —Å–∞–π—Ç –¥–ª—è –æ–±—â–µ–Ω–∏—è, –≥–¥–µ –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID, –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ü–≤–µ—Ç –Ω–∏–∫–∞, —Ü–≤–µ—Ç –æ–±–ª–∞—á–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, –∞–≤–∞—Ç–∞—Ä –∏ —Å—Ç–∏–ª—å.  
    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–µ–º—ã –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è, —ç–º–æ–¥–∑–∏‚Äë–ø–∞–Ω–µ–ª—å, –æ—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏ –º–∏–Ω–∏‚Äë–∏–≥—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, üé≤ –∫—É–±–∏–∫).
  </details>

  <details>
    <summary>–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è</summary>
    <ul>
      <li>–ü–æ—Å–ª–µ –∑–∞—Ö–æ–¥–∞ –Ω–∞ —Å–∞–π—Ç –≤–∞–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–¥–∞—ë—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–π ID. –û–Ω –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ —Ä—è–¥–æ–º —Å –≤–∞—à–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ ‚Äî —ç—Ç–æ –≤–∞—à ¬´–ø–∞—Å–ø–æ—Ä—Ç¬ª –≤ —á–∞—Ç–µ.</li>
      <li>
  –í —Å–∞–º–æ–π –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ —Å–∞–π—Ç–∞ –µ—Å—Ç—å —Å—á—ë—Ç—á–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —á–∞—Ç–µ. 
  –†—è–¥–æ–º —Å –∫–∞–∂–¥—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã‚Äë–∫—Ä—É–∂–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:
  <ul>
    <li><span style="color:#4caf50;">‚óè</span> –ó–µ–ª—ë–Ω—ã–π ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.</li>
    <li><span style="color:#ff9800;">‚óè</span> –û—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî –Ω–µ–¥–∞–≤–Ω–æ –±—ã–ª –∞–∫—Ç–∏–≤–µ–Ω, –∏–º–µ–µ—Ç –ø–ª–æ—Ö–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ AFK.</li>
    <li><span style="color:#f44336;">‚óè</span> –ö—Ä–∞—Å–Ω—ã–π ‚Äî –Ω–µ –ø—Ä–æ—è–≤–ª—è–ª –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –±–æ–ª–µ–µ 12‚Äì60 —Å–µ–∫—É–Ω–¥.</li>
  </ul>
–°—á—ë—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5-10 —Å–µ–∫—É–Ω–¥.
</li>

     <li> –î–∞–ª–µ–µ –≤–≤–µ–¥–∏—Ç–µ —Å–≤–æ—ë –∏–º—è –∏–ª–∏ –ø—Å–µ–≤–¥–æ–Ω–∏–º –≤ –ø–æ–ª–µ ¬´–ù–∏–∫¬ª. –ï—Å–ª–∏ –ø–æ–ª–µ –æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º ‚Äî –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–∏–∫–Ω–µ–π–º ¬´Anon¬ª.</li>
      <li>–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ü–≤–µ—Ç –Ω–∏–∫–∞ –∏ –æ–±–ª–∞—á–∫–∞ (—Ñ–æ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è) —á–µ—Ä–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏.</li>
      <li>–î–æ–±–∞–≤—å—Ç–µ –∞–≤–∞—Ç–∞—Ä–∫—É —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É ¬´–í—ã–±—Ä–∞—Ç—å –∞–≤–∞—Ç–∞—Ä–∫—É¬ª.</li>
      <li>–í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ ¬´—à–µ—Å—Ç–µ—Ä—ë–Ω–∫–∞¬ª. –¢–∞–º –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Ç–µ–º—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è (—Å–≤–µ—Ç–ª–∞—è, —Ç—ë–º–Ω–∞—è, Lumia, Keket, –¢—ë–º–Ω–∞—è –±–∏—Ä—é–∑–∞).</li>
      <li>–ù–∞–ø–∏—à–∏—Ç–µ —Ç–µ–∫—Å—Ç –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–≥–æ –∫–Ω–æ–ø–∫–æ–π ¬´–û—Ç–ø—Ä–∞–≤–∏—Ç—å¬ª –∏–ª–∏ –∫–ª–∞–≤–∏—à–µ–π Enter.</li>
      <li>–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–∫–∏ ¬´–í—ã–±–æ—Ä —Ñ–∞–π–ª–∞¬ª.</li>
      <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞–Ω–µ–ª—å ¬´=)¬ª –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–º–æ–¥–∑–∏ –∏ –∫–∞–æ–º–æ–¥–∑–∏ .</li>
      <li>–í —á–∞—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–æ–º–∞–Ω–¥—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä: <code>/dice</code> ‚Äî –±—Ä–æ—Å–æ–∫ –∫—É–±–∏–∫–∞ üé≤, <code>/msgs</code> ‚Äî –∫–æ–ª–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –≤—Å—ë –≤—Ä–µ–º—è üìä, <code>/8ball</code> ‚Äî —à—É—Ç–æ—á–Ω—ã–π —à–∞—Ä –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã üîÆ. </li>
    </ul>
  </details>

  <details>
    <summary>–ü—Ä–∞–≤–∏–ª–∞</summary>
    <ul>
      <li>–£–≤–∞–∂–∞–π—Ç–µ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —á–∞—Ç–∞.</li>
      <li>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –Ω–µ–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π –ª–µ–∫—Å–∏–∫–æ–π, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–∞–º –∏ —Ñ–ª—É–¥.</li>
      <li>–ó–∞–ø—Ä–µ—â–µ–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ —Å–æ–≥–ª–∞—Å–∏—è –¥—Ä—É–≥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞.</li>
      <li>–ú–∏–Ω–∏ –∏–≥—Ä—ã –∏ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è, –∞ –Ω–µ –¥–ª—è —Å–ø–∞–º–∞.</li>
      <li>–ó–∞–ø—Ä–µ—â–µ–Ω–æ –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—ã (—Ñ–æ—Ç–æ, —Å–æ–æ–±—â–µ–Ω–∏—è) —Å —Ç–µ–º–æ–π 18+.</li>
    </ul>
  </details>

<details> <summary>–°–ø–∏—Å–æ–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –∏ –Ω–æ–≤–æ—Å—Ç–µ–π</summary> 
<ul> <li><strong>02.02.2026</strong> ‚Äî –ù–∞—á–∞–ª–æ –≤–µ–¥–µ–Ω–∏—è –∂—É—Ä–Ω–∞–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π</li> 
<li><strong>02.02.2026</strong> ‚Äî –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π, –∫—Ç–æ –º–æ–∂–µ—Ç —É–¥–∞–ª—è—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî –∞–¥–º–∏–Ω ( ID 51599 ). </li> 
<li><strong>07.02.2026</strong> ‚Äî  –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã: <code>/msgs</code> –∏ <code>/8ball</code> </li> 
<li><strong>07.02.2026</strong> ‚Äî  –í –ø–∞–Ω–µ–ª–∏ —ç–º–æ–¥–∑–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Å–º–∞–π–ª—ã –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –∫–∞–æ–º–æ–¥–∑–∏ –∏ –¥—Ä—É–≥–∏–µ —ç–º–æ–¥–∑–∏.</li>
<li><strong>07.02.2026</strong> ‚Äî  –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –∫–∞–æ–º–æ–¥–∑–∏ –∏ —ç–º–æ–¥–∑–∏ –≤ –ø–∞–Ω–µ–ª—å —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —ç–º–æ–¥–∑–∏: =)  =(  =3  =0  (‚âß‚ñΩ‚â¶)  (‚äô_‚òâ)  (ÔºõÔºøÔºõ)  ¬Ø\_(„ÉÑ)_/¬Ø  (‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª  -_-  –æ_–û  (Õ°¬∞ Õú ñ Õ°¬∞). </li> 
<li><strong>08.02.2026</strong> ‚Äî –î–æ–±–∞–≤–ª–µ–Ω —Å—á—ë—Ç—á–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —á–∞—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 5-10 —Å–µ–∫—É–Ω–¥.  </li> 
<li><strong>08.02.2026</strong> ‚Äî –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:  –∑–µ–ª—ë–Ω—ã–π ‚Äî –∞–∫—Ç–∏–≤–µ–Ω –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å,
    –æ—Ä–∞–Ω–∂–µ–≤—ã–π ‚Äî  –±—ã–ª –Ω–µ–¥–∞–≤–Ω–æ , –∞—Ñ–∫, –ø–ª–æ—Ö–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ,
    –∫—Ä–∞—Å–Ω—ã–π ‚Äî –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω –±–æ–ª–µ–µ 12‚Äì60 —Å–µ–∫—É–Ω–¥. </li> 
<li><strong>08.02.2026</strong> ‚Äî –£–ª—É—á—à–µ–Ω–∞ —Ç–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è ¬´–ö–µ–∫–µ—Ç¬ª.</li> 
 </ul> 
</details>


  <details>
    <summary>–ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å</summary>
    <ul>
      <li>ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: <strong>51599</strong>, –Ω–∏–∫ ‚Äî <strong>Ikogdash</strong>.</li>
      <li>–í—ã –º–æ–∂–µ—Ç–µ —Å–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ Outlook Live: <em>ikogdash@hotmail.com</em>.</li>
      <li>–ú—ã —Ü–µ–Ω–∏–º –≤–∞—à–∏ –∏–¥–µ–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É: –¥–µ–ª–∏—Ç–µ—Å—å –æ—Ç–∑—ã–≤–∞–º–∏, –ø—Ä–µ–¥–ª–∞–≥–∞–π—Ç–µ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Å–æ–æ–±—â–∞–π—Ç–µ –æ–± –æ—à–∏–±–∫–∞—Ö –∏ –æ –Ω–∞—Ä—É—à–∏—Ç–µ–ª—è—Ö –ø—Ä–∞–≤–∏–ª.</li>
    </ul>
  </details>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyATNSmCPnM1og0SO-zJsfD2w9AVC00wiBg",
      authDomain: "fchat-f223c.firebaseapp.com",
      databaseURL: "https://fchat-f223c-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "fchat-f223c",
      storageBucket: "fchat-f223c.appspot.com",
      messagingSenderId: "850391832152",
      appId: "1:850391832152:web:39c320446cd898c7859c2d",
      measurementId: "G-1EVPFPZHPF"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const onlineUsersRef = db.ref("onlineUsers");

    let avatarData = "";
    let nickColor = "";
    let bubbleColor = "";
    let userID = localStorage.getItem('fchat_user_id');

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID –µ—Å–ª–∏ –Ω–µ—Ç
    if (!userID) {
      userID = Math.floor(10000 + Math.random() * 90000);
      localStorage.setItem('fchat_user_id', userID);
    }

    // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å ID
    document.title = `Fchat ‚Äî —á–∞—Ç —Å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–æ–º | –í–∞—à ID: ${userID}`;
    
    // –î–æ–±–∞–≤–ª—è–µ–º ID –≤ –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–∫–∞–∫ —Ä–∞–Ω—å—à–µ)
    const header = document.getElementById("chat-header");
    if (header) {
      header.innerHTML = `<span style="color:gray; font-size:14px;">–í–∞—à ID: ${userID}</span>`;
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
    if (localStorage.getItem('fchat_nick')) {
      document.getElementById('nick').value = localStorage.getItem('fchat_nick');
    }
    if (localStorage.getItem('fchat_nickColor')) {
      nickColor = localStorage.getItem('fchat_nickColor');
    }
    if (localStorage.getItem('fchat_bubbleColor')) {
      bubbleColor = localStorage.getItem('fchat_bubbleColor');
    }
    if (localStorage.getItem('fchat_avatar')) {
      avatarData = localStorage.getItem('fchat_avatar');
      const preview = document.getElementById('avatarPreview');
      preview.src = avatarData;
      preview.style.display = "inline-block";
    }

    function saveSettings() {
      const nick = document.getElementById('nick').value.trim();
      localStorage.setItem('fchat_nick', nick);
      localStorage.setItem('fchat_nickColor', nickColor);
      localStorage.setItem('fchat_bubbleColor', bubbleColor);
    }

    function updateButtons() {
      const themeNick = getComputedStyle(document.body).getPropertyValue('--nickname').trim();
      document.getElementById('nickColorBtn').style.backgroundColor = nickColor || themeNick;

      const outgoingDefault = getComputedStyle(document.body).getPropertyValue('--bubble-outgoing').trim();
      document.getElementById('bubbleColorBtn').style.backgroundColor = bubbleColor || outgoingDefault;

      if (avatarData) {
        const preview = document.getElementById('avatarPreview');
        preview.src = avatarData;
        preview.style.display = "inline-block";
      }
      
      saveSettings();
    }

    function handleCommand(text) {
      if (text.startsWith("/dice")) {
        const roll = Math.floor(Math.random() * 6) + 1;
        return "üé≤ –í—ã–ø–∞–ª–æ: " + roll;
      }
      if (text === "/msgs") {
        const msgCount = document.querySelectorAll('.msg').length;
        return `üìä –°–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ: ${msgCount}`;
      }
      if (text.startsWith("/8ball") || text.startsWith("/ball")) {
        const answers = [
          "–î–∞, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ", "–ë–µ—Å—Å–ø–æ—Ä–Ω–æ", "–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è ‚Äî –¥–∞", "–í–µ—Ä–æ—è—Ç–Ω–µ–µ –≤—Å–µ–≥–æ",
          "–°–ø—Ä–æ—Å–∏ –ø–æ–∑–∂–µ", "–ù–µ –º–æ–≥—É —Å–µ–π—á–∞—Å —Å–∫–∞–∑–∞—Ç—å", "–°–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä—É–π—Å—è –∏ —Å–ø—Ä–æ—Å–∏ –æ–ø—è—Ç—å",
          "–î–∞–∂–µ –Ω–µ –¥—É–º–∞–π", "–ú–æ–π –æ—Ç–≤–µ—Ç ‚Äî –Ω–µ—Ç", "–ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–∏–µ",
          "–í–µ—Å—å–º–∞ —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω–æ", "–ó–Ω–∞–∫–∏ –≥–æ–≤–æ—Ä—è—Ç ‚Äî –¥–∞"
        ];
        return `üîÆ ${answers[Math.floor(Math.random() * answers.length)]}`;
      }
      return null;
    }

    function addMessage(msg, key) {
      const chat = document.getElementById('chat');
      const wrapper = document.createElement('div');
      wrapper.className = "msg";
      wrapper.dataset.messageKey = key;

      if (msg.avatar) {
        const img = document.createElement('img');
        img.className = "avatar";
        img.src = msg.avatar;
        wrapper.appendChild(img);
      }

      const bubbleEl = document.createElement('div');
      const currentNick = document.getElementById('nick').value.trim() || "Anon";
      const isOutgoing = msg.nick === currentNick;
      bubbleEl.className = "bubble " + (isOutgoing ? "outgoing" : "incoming");

      if (msg.bubbleColor) {
        bubbleEl.style.backgroundColor = msg.bubbleColor;
      }

      const themeNick = getComputedStyle(document.body).getPropertyValue('--nickname').trim();
      const textEl = document.createElement('div');
      textEl.innerHTML = `
        <span class="nick" style="color:${msg.color || themeNick}">${msg.nick}</span>
        <span class="user-id">ID:${msg.id}</span>: ${msg.text || ''}
      `;

      bubbleEl.appendChild(textEl);

      if (msg.image) {
        const imgEl = document.createElement('img');
        imgEl.className = "chatImage";
        imgEl.src = msg.image;
        bubbleEl.appendChild(imgEl);
      }

      const timeEl = document.createElement('div');
      timeEl.className = "time";
      timeEl.textContent = msg.time || '';
      bubbleEl.appendChild(timeEl);

      const canDelete = msg.id === userID || userID === "51599";
      
      if (canDelete) {
        const delBtn = document.createElement('button');
        delBtn.className = "deleteBtn";
        delBtn.textContent = "X";
        delBtn.title = "–£–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ";
        
        delBtn.onclick = () => {
          let confirmationText = "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ?";
          if (msg.id !== userID) {
            confirmationText = `–í—ã —É–¥–∞–ª—è–µ—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${msg.nick} (ID: ${msg.id}). –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?`;
          }
          
          if (confirm(confirmationText)) {
            db.ref("messages/" + key).remove().catch(err => {
              console.error("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è:", err);
              alert("–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å: " + err.code);
            });
            wrapper.remove();
          }
        };
        
        bubbleEl.appendChild(delBtn);
      }

      wrapper.appendChild(bubbleEl);
      chat.appendChild(wrapper);
      chat.scrollTop = chat.scrollHeight;
    }

    function send() {
      const nick = document.getElementById('nick').value.trim() || "Anon";
      const text = document.getElementById('text').value.trim();
      const fileInput = document.getElementById('fileInput');
      const file = fileInput.files[0];

      if (!text && !file) return;

      const now = new Date();
      const timeStr = now.getHours().toString().padStart(2,'0') + ":" + now.getMinutes().toString().padStart(2,'0');

      const msg = {
        nick,
        id: userID,
        text,
        color: nickColor || "",
        avatar: avatarData,
        bubbleColor: bubbleColor || "",
        time: timeStr
      };
      
      const commandResult = handleCommand(msg.text);
      if (commandResult) {
        addMessage({ nick: "FchatBot", text: commandResult, id: "BOT" });
      }

      const writeMsg = (m) => {
        const ref = db.ref("messages").push();
        ref.set(m).catch(err => {
          console.error("–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏:", err);
          alert("–ó–∞–ø–∏—Å—å –Ω–µ —É–¥–∞–ª–∞—Å—å: " + err.code);
        });
      };

      if (file) {
        const reader = new FileReader();
        reader.onload = ev => { msg.image = ev.target.result; writeMsg(msg); };
        reader.readAsDataURL(file);
      } else {
        writeMsg(msg);
      }

      document.getElementById('text').value = '';
      fileInput.value = '';
    }

    // ========== –°–ò–°–¢–ï–ú–ê –û–ù–õ–ê–ô–ù –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô ==========

    function updateOnlineStatus() {
      const userRef = onlineUsersRef.child(userID);
      const nick = document.getElementById('nick').value.trim() || "Anon";
      
      userRef.set({
        id: userID,
        nick: nick,
        lastSeen: firebase.database.ServerValue.TIMESTAMP,
        avatar: avatarData || "",
        color: nickColor || ""
      });
    }

    function setupOnlineTracker() {
      updateOnlineStatus();
      
      setInterval(updateOnlineStatus, 5000);
      
      onlineUsersRef.on('value', (snapshot) => {
        const users = snapshot.val();
        const onlineList = document.getElementById('onlineUsersList');
        const onlineCount = document.getElementById('onlineCount');
        
        if (!users) {
          onlineList.innerHTML = '<p id="noUsersOnline" style="color: #999; font-style: italic; text-align: center;">–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–Ω–ª–∞–π–Ω</p>';
          onlineCount.textContent = '0';
          return;
        }
        
        const now = Date.now();
        const activeUsers = Object.values(users).filter(user => {
          return now - user.lastSeen < 15000;
        });
        
        onlineCount.textContent = activeUsers.length;
        
        if (activeUsers.length === 0) {
          onlineList.innerHTML = '<p id="noUsersOnline" style="color: #999; font-style: italic; text-align: center;">–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–Ω–ª–∞–π–Ω</p>';
          return;
        }
        
        activeUsers.sort((a, b) => b.lastSeen - a.lastSeen);
        
        let usersHTML = '';
        activeUsers.forEach(user => {
          const isCurrentUser = user.id === userID;
          const lastSeenSec = Math.floor((now - user.lastSeen) / 1000);
          let statusClass = 'status-red';
          let statusTitle = '–ë—ã–ª ' + lastSeenSec + ' —Å–µ–∫ –Ω–∞–∑–∞–¥';
          
          if (lastSeenSec < 5) {
            statusClass = 'status-green';
            statusTitle = '–ê–∫—Ç–∏–≤–µ–Ω —Å–µ–π—á–∞—Å';
          } else if (lastSeenSec < 10) {
            statusClass = 'status-orange';
            statusTitle = '–ë—ã–ª –Ω–µ–¥–∞–≤–Ω–æ';
          }
          
          usersHTML += `
            <div class="online-user" style="
              display: flex;
              align-items: center;
              margin: 8px 0;
              padding: 8px;
              background: ${isCurrentUser ? 'rgba(76, 175, 80, 0.1)' : 'transparent'};
              border-radius: 8px;
              border: 1px solid ${isCurrentUser ? '#4CAF50' : 'var(--panel-border)'};
            ">
              ${user.avatar ? `
                <img src="${user.avatar}" style="
                  width: 32px;
                  height: 32px;
                  border-radius: 50%;
                  margin-right: 10px;
                  border: 1px solid ${user.color || '#aaa'};
                " alt="${user.nick}">
              ` : `
                <div style="
                  width: 32px;
                  height: 32px;
                  border-radius: 50%;
                  margin-right: 10px;
                  background: ${user.color || '#666'};
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  color: white;
                  font-size: 12px;
                ">${user.nick.charAt(0)}</div>
              `}
              
              <div style="flex-grow: 1;">
                <div style="display: flex; align-items: center;">
                  <strong style="color: ${user.color || 'var(--text)'};">${user.nick}</strong>
                  ${isCurrentUser ? '<span style="margin-left: 5px; font-size: 11px; color: #4CAF50;">(–í—ã)</span>' : ''}
                </div>
                <div style="font-size: 11px; color: #888;">
                  ID: ${user.id}
                </div>
              </div>
              
              <div class="status-dot ${statusClass}" title="${statusTitle}"></div>
            </div>
          `;
        });
        
        onlineList.innerHTML = usersHTML;
      });
      
      window.addEventListener('beforeunload', function() {
        onlineUsersRef.child(userID).remove();
      });
    }

    // ========== –û–°–ù–û–í–ù–´–ï –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò ==========

    db.ref("messages").on("child_added", snapshot => {
      addMessage(snapshot.val(), snapshot.key);
    }, err => {
      console.error("–û—à–∏–±–∫–∞ –ø–æ–¥–ø–∏—Å–∫–∏:", err);
      alert("–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —á—Ç–µ–Ω–∏—é: " + err.code);
    });

    document.getElementById('sendBtn').onclick = send;
    document.getElementById('text').addEventListener("keydown", e => {
      if (e.key === "Enter") { e.preventDefault(); send(); }
    });

    document.getElementById('nickColorBtn').onclick = () => document.getElementById('nickColorInput').click();
    document.getElementById('bubbleColorBtn').onclick = () => document.getElementById('bubbleColorInput').click();

    document.getElementById('nick').addEventListener('input', function() {
      saveSettings();
      updateOnlineStatus();
    });

    document.getElementById('nickColorInput').addEventListener("input", e => {
      nickColor = e.target.value;
      updateButtons();
      saveSettings();
    });
    
    document.getElementById('bubbleColorInput').addEventListener("input", e => {
      bubbleColor = e.target.value;
      updateButtons();
      saveSettings();
    });

    document.getElementById('avatarBtn').onclick = () => document.getElementById('avatarInput').click();
    document.getElementById('avatarInput').addEventListener("change", e => {
      const file = e.target.files[0]; 
      if (!file) return;
      const reader = new FileReader();
      reader.onload = ev => {
        avatarData = ev.target.result;
        const preview = document.getElementById('avatarPreview');
        preview.src = avatarData;
        preview.style.display = "inline-block";
        localStorage.setItem('fchat_avatar', avatarData);
        updateOnlineStatus();
      };
      reader.readAsDataURL(file);
    });

    const settingsBtn = document.getElementById('settingsBtn');
    const settingsPanel = document.getElementById('settingsPanel');
    const themeRadios = document.querySelectorAll('input[name="theme"]');

    const savedTheme = localStorage.getItem('fchat-theme') || 'light';
    document.body.classList.remove('theme-light','theme-dark','theme-lumia','theme-Keket');
    document.body.classList.add(`theme-${savedTheme}`);
    themeRadios.forEach(r => r.checked = r.value === savedTheme);

    settingsBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      const open = settingsPanel.style.display === 'block';
      settingsPanel.style.display = open ? 'none' : 'block';
    });

    document.addEventListener('click', (e) => {
      if (!settingsPanel.contains(e.target) && e.target !== settingsBtn) {
        settingsPanel.style.display = 'none';
      }
    });

    themeRadios.forEach(radio => {
      radio.addEventListener('change', (e) => {
        const val = e.target.value;
        document.body.classList.remove('theme-light','theme-dark','theme-lumia','theme-Keket','theme-cosmos');
        document.body.classList.add(`theme-${val}`);
        localStorage.setItem('fchat-theme', val);
        updateButtons();
      });
    });

    function addEmoji(emoji) {
      const input = document.getElementById('text');
      input.value += emoji;
      input.focus();
    }

    document.getElementById('emojiBtn').onclick = () => {
      const panel = document.getElementById('emojiPanel');
      panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
    };

    document.getElementById('emojiPanel').addEventListener('click', (e) => {
      if (e.target.tagName === 'BUTTON') {
        addEmoji(e.target.textContent);
      }
    });

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    updateButtons();
    setupOnlineTracker();
  </script>

  <footer style="text-align:center; padding:10px; font-size:14px; color:#888;">
    ¬© Ikogdash, 2025-2026
  </footer>
</body>
</html>
